<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Friend Survey</title>
    <!-- Compiled and minified CSS -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css"
    />
    <!-- Jquery -->
    <script
      src="https://code.jquery.com/jquery-3.5.1.min.js"
      integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
      crossorigin="anonymous"
    ></script>
    <!-- Font Awesome -->
    <script
      src="https://kit.fontawesome.com/2b14a6ccbc.js"
      crossorigin="anonymous"
    ></script>
    <!-- Compiled and minified JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
  </head>
  <body>
    <nav>
      <div class="nav-wrapper amber darken-3">
        <i class="fas fa-user-friends"></i>
        <a href="./home.html" class="brand-logo">Friend Finder</a>
      </div>
    </nav>

    <section>
      <div class="container">
        <div class="row">
          <div class="col s12">
            <h2>Survey Questions</h2>
            <h4>About You</h4>
            <!-- Input Fields -->
            <div class="input-field col s8">
              <h6 class="survey">Name (Required)</h6>
              <input
                type="text"
                class="validate"
                placeholder="John Smith"
                id="userName"
                data-error="Please enter your name"
                required="required"
              />
            </div>

            <div class="input-field col s8">
              <h6 class="survey">Link to Photo Image (Required)</h6>
              <input
                type="text"
                class="validate"
                placeholder="Photo Link"
                id="userPhoto"
                data-error="Please enter image link"
                required="required"
              />
            </div>
            <!-- Questions -->
            <div class="input-field col s12">
              <h4>Question 1</h4>
              <h5>How important is it that you exercise regularly?</h5>
              <select id="q1">
                <option value="" disabled selected>Choose your option</option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
              </select>
              <label>Materialize Select</label>
            </div>
            <div class="input-field col s12">
              <h4>Question 2</h4>
              <h5>How likely are you to sleep in on weekends?</h5>
              <select id="q2">
                <option value="" disabled selected>Choose your option</option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
              </select>
              <label>Materialize Select</label>
            </div>
            <div class="input-field col s12">
              <h4>Question 3</h4>
              <h5>How creative would you consider yourself to be?</h5>
              <select id="q3">
                <option value="" disabled selected>Choose your option</option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
              </select>
              <label>Materialize Select</label>
            </div>
            <div class="input-field col s12">
              <h4>Question 4</h4>
              <h5>
                How important is it that you accomplish something productive
                every day?
              </h5>
              <select id="q4">
                <option value="" disabled selected>Choose your option</option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
              </select>
              <label>Materialize Select</label>
            </div>
            <div class="input-field col s12">
              <h4>Question 5</h4>
              <h5>You love being in social settings</h5>
              <select id="q5">
                <option value="" disabled selected>Choose your option</option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
              </select>
              <label>Materialize Select</label>
            </div>
            <div class="input-field col s12">
              <h4>Question 6</h4>
              <h5>
                How comfortable are you with putting things off until the last
                second?
              </h5>
              <select id="q6">
                <option value="" disabled selected>Choose your option</option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
              </select>
              <label>Materialize Select</label>
            </div>
            <div class="input-field col s12">
              <h4>Question 7</h4>
              <h5>How patient are you?</h5>
              <select id="q7">
                <option value="" disabled selected>Choose your option</option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
              </select>
              <label>Materialize Select</label>
            </div>
            <div class="input-field col s12">
              <h4>Question 8</h4>
              <h5>How happy are you when you have nothing to do?</h5>
              <select id="q8">
                <option value="" disabled selected>Choose your option</option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
              </select>
              <label>Materialize Select</label>
            </div>
            <div class="input-field col s12">
              <h4>Question 9</h4>
              <h5>How good are you at keeping secrets?</h5>
              <select id="q9">
                <option value="" disabled selected>Choose your option</option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
              </select>
              <label>Materialize Select</label>
            </div>
            <div class="input-field col s12">
              <h4>Question 10</h4>
              <h5>How good are you at trivia?</h5>
              <select id="q10">
                <option value="" disabled selected>Choose your option</option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
              </select>
              <label>Materialize Select</label>
            </div>
            <!-- Submit button -->
            <div class="row">
              <div class="col s12">
                <a
                  class="waves-effect waves-light btn blue"
                  name="action"
                  type="submit"
                  id="submit"
                  >Submit</a
                >
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <footer class="page-footer amber darken-3">
      <div class="container">
        <div class="row">
          <a href="/api/friends" class="white-text text lighten-5"
            >API Friends List</a
          >
          |
          <a
            href="https://github.com/jsilver88/FriendFinder"
            class="white-text text lighten-5"
            >Github Repo</a
          >
        </div>
      </div>
    </footer>

    <!-- Modal Structure -->
    <div id="modal1" class="modal">
      <div class="modal-content">
        <h4>Closest Friend</h4>
        <p id="friendMatch"></p>
        <img id="friendImg" width="500" alt="" src="" />
      </div>
      <div class="modal-footer">
        <a href="/survey" class="modal-close waves-effect waves-green btn-flat"
          >Agree</a
        >
      </div>
    </div>

    <!-- JavaScript -->
    <script type="text/javascript">
      $(document).ready(function () {
        $("select").formSelect();
        $(".modal").modal({
          disimissable: false,
          inDuration: 250,
          outDuration: 250,
          opacity: 0.5,
        });
      });

      $("#submit").on("click", function (e) {
        e.preventDefault();

        let requiredInput = true;
        if (requiredInput === true) {
          let newUser = {
            name: $("#userName").val().trim(),
            photo: $("#userPhoto").val().trim(),
            scores: [
              $("#q1").val(),
              $("#q2").val(),
              $("#q3").val(),
              $("#q4").val(),
              $("#q5").val(),
              $("#q6").val(),
              $("#q7").val(),
              $("#q8").val(),
              $("#q9").val(),
              $("#q10").val(),
            ],
          };

          $.post("/api/friends", newUser, function (data) {
            $("#friendMatch").html(data.friend);
            $("#friendImg").attr("src", data.image);
            $("#modal1").modal("open");
          });
        }
      });
    </script>
  </body>
</html>
